<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->

    <!-- Bootstrap CSS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <title>React App</title>
  </head>

  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add webfonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
    <div
      class="modal fade"
      id="modalEliminarVacante"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Confirmar</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">¿Estas seguro de eliminar esta vacante?</div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Cancelar
            </button>
            <button type="button" id="eliminarBtn" class="btn btn-primary">
              Confirmar
            </button>
          </div>
        </div>
      </div>
    </div>
    <!--Modal datos manual-->
    <div
      class="modal fade"
      id="modalEditar"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">
              Actualizar los datos
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- card item-->
            <div class="mb-2">
              <label for="titulo" class="form-label font-weight-bold"
                >Titulo</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el titulo"
                id="titulo"
              />
            </div>
            <div class="mb-2">
              <label for="company" class="form-label font-weight-bold"
                >Compañia</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el nombre"
                id="company"
              />
            </div>
            <div class="mb-2">
              <label for="place" class="form-label font-weight-bold"
                >Lugar</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el lugar"
                id="place"
              />
            </div>
            <div class="mb-2">
              <label for="email" class="form-label font-weight-bold"
                >Email</label
              >
              <input
                type="email"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el email"
                id="email"
              />
            </div>
            <div class="mb-2">
              <label for="phone" class="form-label font-weight-bold"
                >Telefono</label
              >
              <input
                type="number"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el telefono"
                id="phone"
              />
            </div>
            <div class="mb-2">
              <label for="bodyVacante" class="form-label font-weight-bold"
                >Cuerpo</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el cuerpo"
                id="bodyVacante"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              id="confirmarEdicion"
              class="btn btn-warning"
              style="width: 48%"
            >
              Confirmar y guardar
            </button>
            <button
              style="width: 48%"
              data-bs-dismiss="modal"
              type="button"
              class="btn btn-dark"
            >
              Volver
            </button>
          </div>
        </div>
      </div>
    </div>
    <!--Modal añadir-->
    <div
      class="modal fade"
      id="modalAñadir"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div
        class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Nueva Vacante</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- card item-->
            <div class="mb-2">
              <label for="tituloNuevo" class="form-label font-weight-bold"
                >Titulo</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el titulo"
                id="tituloNuevo"
              />
            </div>
            <div class="mb-2">
              <label for="companyNuevo" class="form-label font-weight-bold"
                >Compañia</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el nombre"
                id="companyNuevo"
              />
            </div>
            <div class="mb-2">
              <label for="placeNuevo" class="form-label font-weight-bold"
                >Lugar</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el lugar"
                id="placeNuevo"
              />
            </div>
            <div class="mb-2">
              <label for="emailNuevo" class="form-label font-weight-bold"
                >Email</label
              >
              <input
                type="email"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el email"
                id="emailNuevo"
              />
            </div>
            <div class="mb-2">
              <label for="phoneNuevo" class="form-label font-weight-bold"
                >Telefono</label
              >
              <input
                type="number"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el telefono"
                id="phoneNuevo"
              />
            </div>
            <div class="mb-2">
              <label for="bodyVacanteNuevo" class="form-label font-weight-bold"
                >Cuerpo</label
              >
              <input
                type="text"
                class="form-control border-0"
                style="background-color: #dfe6e9"
                placeholder="Ingresa el cuerpo"
                id="bodyVacanteNuevo"
              />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              id="confirmarAdicion"
              class="btn btn-warning"
              style="width: 48%"
            >
              Confirmar y guardar
            </button>
            <button
              style="width: 48%"
              data-bs-dismiss="modal"
              type="button"
              class="btn btn-dark"
            >
              Volver
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"
  ></script>
  <script>
    var modalElimina = document.getElementById("modalEliminarVacante");
    modalElimina.addEventListener("show.bs.modal", function (event) {
      // Button that triggered the modal
      var button = event.relatedTarget;
      // Extract info from data-bs-* attributes
      var recipient = button.getAttribute("data-bs-whatever");

      var element3 = document.getElementById("eliminarBtn");
      element3.onclick = function (event) {
        //validamos el login
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "https://backend-api-d.herokuapp.com/graphql", true);
        xhr.setRequestHeader("Content-type", "application/json");
        xhr.onload = function () {
          window.location.reload();
        };

        var queryString =
          '{"query":"query{deleteJob(id:\\"' +
          recipient +
          '\\"){title}}","variables":null}';
        console.log(queryString);
        xhr.send(queryString);
      };
    });

    var input = document.getElementById("phoneNuevo");
    input.addEventListener("input", function () {
      if (this.value.length > 10) this.value = this.value.slice(0, 10);
    });
    var input = document.getElementById("phone");
    input.addEventListener("input", function () {
      if (this.value.length > 10) this.value = this.value.slice(0, 10);
    });
    var modalEditar = document.getElementById("modalEditar");
    modalEditar.addEventListener("show.bs.modal", function (event) {
      // Button that triggered the modal
      var button = event.relatedTarget;
      // Extract info from data-bs-* attributes
      var recipient = button.getAttribute("data-bs-whatever");
      var titleEd = button.getAttribute("data-title");
      var companyEd = button.getAttribute("data-company");
      var placeEd = button.getAttribute("data-place");
      var emailEd = button.getAttribute("data-email");
      var phoneEd = button.getAttribute("data-phone");
      var bodyEd = button.getAttribute("data-body");

      document.getElementById("titulo").value = titleEd;
      document.getElementById("company").value = companyEd;
      document.getElementById("place").value = placeEd;
      document.getElementById("email").value = emailEd;
      document.getElementById("phone").value = phoneEd;
      document.getElementById("bodyVacante").value = bodyEd;

      var element3 = document.getElementById("confirmarEdicion");
      element3.onclick = function (event) {
        if (
          document.getElementById("titulo").value == "" ||
          document.getElementById("company").value == "" ||
          document.getElementById("place").value == "" ||
          document.getElementById("email").value == "" ||
          document.getElementById("phone").value == "" ||
          document.getElementById("bodyVacante").value == ""
        ) {
          alert("Has olvidado rellenar algun campo");
        } else {
          var tituloEditado = document.getElementById("titulo").value;
          var companyEditado = document.getElementById("company").value;
          var placeEditado = document.getElementById("place").value;
          var emailEditado = document.getElementById("email").value;
          var phoneEditado = document.getElementById("phone").value;
          var bodyEditado = document.getElementById("bodyVacante").value;
          //validamos el login
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "https://backend-api-d.herokuapp.com/graphql", true);
          xhr.setRequestHeader("Content-type", "application/json");
          xhr.onload = function () {
            window.location.reload();
          };

          var queryString =
            '{"query":"mutation {updateJob(id:\\"' +
            recipient +
            '\\", job: { title: \\"' +
            tituloEditado +
            '\\",companyName: \\"' +
            companyEditado +
            '\\", place: \\"' +
            placeEditado +
            '\\", emailCompany: \\"' +
            emailEditado +
            '\\", phoneCompany: \\"' +
            phoneEditado +
            '\\", body: \\"' +
            bodyEditado +
            '\\"}) {emailCompany body createdAt}}","variables":null}';
          console.log(queryString);
          xhr.send(queryString);
        }
      };
    });

    var modalAñadir = document.getElementById("modalAñadir");
    modalAñadir.addEventListener("show.bs.modal", function (event) {
      // Button that triggered the modal
      var button = event.relatedTarget;

      var element3 = document.getElementById("confirmarAdicion");
      element3.onclick = function (event) {
        if (
          document.getElementById("tituloNuevo").value == "" ||
          document.getElementById("companyNuevo").value == "" ||
          document.getElementById("placeNuevo").value == "" ||
          document.getElementById("emailNuevo").value == "" ||
          document.getElementById("phoneNuevo").value == "" ||
          document.getElementById("bodyVacanteNuevo").value == ""
        ) {
          alert("Has olvidado rellenar algun campo");
        } else {
          var tituloEditado = document.getElementById("tituloNuevo").value;
          var companyEditado = document.getElementById("companyNuevo").value;
          var placeEditado = document.getElementById("placeNuevo").value;
          var emailEditado = document.getElementById("emailNuevo").value;
          var phoneEditado = document.getElementById("phoneNuevo").value;
          var bodyEditado = document.getElementById("bodyVacanteNuevo").value;
          //validamos el login
          var xhr = new XMLHttpRequest();
          xhr.open("POST", "https://backend-api-d.herokuapp.com/graphql", true);
          xhr.setRequestHeader("Content-type", "application/json");
          xhr.onload = function () {
            window.location.reload();
          };

          var queryString =
            '{"query":"mutation {createJob(job: { title: \\"' +
            tituloEditado +
            '\\",companyName: \\"' +
            companyEditado +
            '\\", place: \\"' +
            placeEditado +
            '\\", emailCompany: \\"' +
            emailEditado +
            '\\", phoneCompany: \\"' +
            phoneEditado +
            '\\", body: \\"' +
            bodyEditado +
            '\\"}) {emailCompany body createdAt}}","variables":null}';
          console.log(queryString);
          xhr.send(queryString);
        }
      };
    });
  </script>
</html>
